---
title: Deep dive under the DOM
description: Understanding the Document Object Model in a digestible way.
date: 2020-12-02
featured: https://res.cloudinary.com/ernestoresende/image/upload/v1630823203/og%20cards/Deep_dive_under_the_Dom_furg7v.jpg
tags: ['Web Fundamentals']
---

We've all manipulated the DOM at some point on our lives as web developers.

Maybe you're messing around with some simple HTML markup, or doing complex state updates with a UI library like React or Angular. At some point, you're manipulating the document structure in some way.

But what even **is** the object model? How does it correlate with the document? What exactly can be done with it, and how does the browser knows what do to with it?

In this piece I aim at taking a very detailed, yet digestible approach at explaining what is the DOM, how it works, and how you and the tooling you use are able to manipulate it to make things happen in the browser.

<Sidenote type="warning" title="Intended audience">

  <p className='last-line'>This article assumes that you know some basic HTML, CSS and JavaScript and their respective roles on the web.</p>

</Sidenote>

# What is the DOM?

DOM is the abbreviation for **Document Object Model**. Think of it as tree-model that represents the structure of what was created in the HTML document.

Given the following HTML markup:

```html
<html>
	<head>
		<title>This is a title</title>
	</head>
	<body>
		<h1>A heading<h1>
		<a href="https://someplace.com">A link</a>
	</body>
<html>
```

This is the corresponding Document Object Model:

// There is going to be an interactive tree-view component representing the document object model.

Having this in mind we can already clear a common misconception. **The DOM is not the same thing as the HTML.**

---

Let's take a moment to have a detailed look at what is going on from the moment we request a webpage from a server, to the moment it is completely rendered in our screen:

At the very root of this process, the browser reads the raw bytes from the HTML sent by the network, and translates them to individual characters.

It then converts these into distinct tokens, that are then converted into objects. These are the objects that are going to be composing the DOM.

---

Since the HTML markup defines clear relationships between different tags, the objects are grouped in a tree-like data structure that reflects the relationships established in the original markup.

The DOM tree is generated when the browser parses the HTML document of a webpage, and as seen in the example above, has a different way of structuring the elements — originally written in HTML — in what we call **nodes**.

Every time the browser is encumbered with the task of processing HTML markup it has to go trough all of the steps listed above; larger HTML markups will result in more time waiting for this process to finish.

<Sidenote type="info" title="Other languages">

  <p className='last-line'>The most common use for the DOM is to interact with HTML documents, but the DOM can be used to access XML and SVG documents as well, given that they work very similarly.</p>

</Sidenote>

With the DOM tree created, the nodes become accessible from JavaScript by using the `document` object. If you are familiar with writing operations like `document.getElementsById()` in JavaScript, you can kind of see where we are going here.

A regular web page is nothing more but a document that can either be displayed in a browser, or as the HTML raw source. The DOM is responsible for representing that same document in a way it can be manipulated by other programs and/or user interaction.

# So, what about the CSS?
Well, yes. Just as we have a tree-model document for the HTML elements we write, we also have the same document for the CSS.

HTML markup is transformed into a Document Object Model; CSS markup is transformed into a CSS Object Model; that is the CSSOM. The DOM and CSSOM are independent data structures.

On a "page lifecycle", the DOM and CSSOM trees are combined into a render tree containing only the nodes that are necessary to render a given page. The rendered tree is then used to compute the exact position and size of each object used in the last step of that cycle, the painting process.

<Sidenote type="info">

  <p className='last-line'>The render-tree construction, layout and painting are a whole thing of their own, and I plan on covering them with the care they deserve in a future web-performance related article.</p>

</Sidenote>

# DOM manipulation

The DOM itself is not a programming language, but without it, scripting languages like JavaScript wouldn't have any notion of what the heck are the HTML documents and their elements.

As a developer, you don't need to do anything special or complex to begin accessing and manipulating the DOM; you will be using objects such as `document` and `window` and their interfaces, such as `querySelector` and `createElement`.

<Sidenote type="info">

  <p className='last-line'>The examples above are all based on the syntax used to access the DOM using JavaScript. But JavaScript is not the only language that is capable of accessing DOM elements.</p>

</Sidenote>

---

Let's assume the existence of an HTML document with a anchor tag on it. To manipulate it from JavaScript, you would proceed with steps like:

```javascript
// "Select" the element and store a reference to it in a variable
const link = document.querySelector('a');

// Manipulates the content of the text string inside the anchor tag
link.textContent = 'This is a link';

// Change the anchor tag's URL
link.href = 'https://someplace.com';
```

Notice how we store an reference to an element by using the `querySelector` interface, and manipulate it by using the properties and methods available to that specific element.
